{% comment %}
  Section: No Promises Just Proof
  - Full-width section with background options
  - Header with image, title, and rich text
  - Two-column layout: lab logos box and empty content container
{% endcomment %}

{{ 'no-promises-proof.css' | asset_url | stylesheet_tag }}

<style>
  /* Dynamic Padding */
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.paddingtop | round: 0 }}px;
    padding-bottom: {{ section.settings.paddingbottom | round: 0 }}px;
    padding-left: {{ section.settings.paddingleft | round: 0 }}px;
    padding-right: {{ section.settings.paddingright | round: 0 }}px;
  }

  /* Mobile Padding */
  @media screen and (max-width: 768px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.paddingtopmobile | round: 0 }}px;
      padding-bottom: {{ section.settings.paddingbottommobile | round: 0 }}px;
      padding-left: {{ section.settings.paddingleftmobile | round: 0 }}px;
      padding-right: {{ section.settings.paddingrightmobile | round: 0 }}px;
    }
  }

  /* Background Color */
  .section-{{ section.id }} {
    {% if section.settings.background_color != blank %}
      background-color: {{ section.settings.background_color }};
    {% endif %}
  }

  /* Background Image */
  {% if section.settings.background_image != blank %}
    .section-{{ section.id }}::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('{{ section.settings.background_image | image_url: width: 1920 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      z-index: 0;
    }
    .section-{{ section.id }} .proof-container {
      position: relative;
      z-index: 1;
    }
  {% endif %}

  /* Dynamic Image Width */
  {% for block in section.blocks %}
    {% if block.type == 'image' %}
      .section-{{ section.id }} .proof-image-{{ block.id }} img {
        max-width: {{ block.settings.image_width | round: 0 }}px;
      }
    {% endif %}
  {% endfor %}
</style>

<section id="no-promises-proof" class="no-promises-proof section-{{ section.id }}-padding section-{{ section.id }}">
  <div class="proof-container"
      data-aos="fade-up" 
      data-aos-duration="3000"
  >

    <!-- Header Container -->
    <div class="proof-header">
      {% for block in section.blocks %}
        {% if block.type == 'image' %}
          <div class="proof-image proof-image-{{ block.id }}" {{ block.shopify_attributes }}>
            {% if block.settings.image != blank %}
              <img
                src="{{ block.settings.image | image_url: width: 600 }}"
                alt="{{ block.settings.image.alt }}"
                width="600"
                height="600"
                loading="lazy">
            {% else %}
              {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
            {% endif %}
          </div>
        {% endif %}

        {% if block.type == 'title' %}
          <div class="proof-title-wrapper align-{{ block.settings.alignment }}" {{ block.shopify_attributes }}>
            {% if block.settings.title != blank %}
              <h2 class="proof-title">{{ block.settings.title }}</h2>
            {% endif %}
          </div>
        {% endif %}

        {% if block.type == 'rich_text' %}
          <div class="proof-text-wrapper align-{{ block.settings.alignment }}" {{ block.shopify_attributes }}>
            {% if block.settings.content != blank %}
              <div class="proof-text">{{ block.settings.content }}</div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Two Column Layout -->
    <div class="proof-columns">

      <!-- Content Column with Image -->
      <div class="proof-content-column">
        {% for block in section.blocks %}
          {% if block.type == 'content_image' %}
            <div class="proof-content-image" {{ block.shopify_attributes }}>
              {% if block.settings.image_desktop != blank or block.settings.image_mobile != blank %}
                <!-- Desktop Image -->
                {% if block.settings.image_desktop != blank %}
                  <img
                    src="{{ block.settings.image_desktop | image_url: width: 1200 }}"
                    srcset="{{ block.settings.image_desktop | image_url: width: 600 }} 600w,
                            {{ block.settings.image_desktop | image_url: width: 1200 }} 1200w"
                    sizes="(min-width: 960px) 50vw, 100vw"
                    alt="{{ block.settings.image_desktop.alt }}"
                    width="{{ block.settings.image_desktop.width }}"
                    height="{{ block.settings.image_desktop.height }}"
                    class="content-image-desktop none-480"
                    loading="lazy">
                {% else %}
                  <div class="content-image-placeholder none-480">
                    {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                {% endif %}

                <!-- Mobile Image -->
                {% if block.settings.image_mobile != blank %}
                  {% assign mobile_image = block.settings.image_mobile %}
                {% else %}
                  {% assign mobile_image = block.settings.image_desktop %}
                {% endif %}

                {% if mobile_image != blank %}
                  <img
                    src="{{ mobile_image | image_url: width: 800 }}"
                    srcset="{{ mobile_image | image_url: width: 400 }} 400w,
                            {{ mobile_image | image_url: width: 800 }} 800w"
                    sizes="100vw"
                    alt="{{ mobile_image.alt }}"
                    width="{{ mobile_image.width }}"
                    height="{{ mobile_image.height }}"
                    class="content-image-mobile block-480"
                    loading="lazy">
                {% else %}
                  <div class="content-image-placeholder block-480">
                    {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                {% endif %}
              {% else %}
                <div class="content-image-placeholder">
                  {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                </div>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>

      <!-- Lab Logos Column -->
      <div class="proof-labs-column">
        {% for block in section.blocks %}
          {% if block.type == 'lab_logo' %}
            <div class="lab-logo-box" {{ block.shopify_attributes }}>
              {% if block.settings.logo != blank %}
                <div class="lab-logo-content">
                  <div class="lab-logo-left">
                    {% if block.settings.url != blank %}
                      <a href="{{ block.settings.url }}" target="_blank" rel="noopener">
                        <img
                          src="{{ block.settings.logo | image_url: width: 200 }}"
                          alt="{{ block.settings.logo.alt }}"
                          width="{{ block.settings.logo.width }}"
                          height="{{ block.settings.logo.height }}"
                          class="lab-logo-img"
                          loading="lazy">
                      </a>
                    {% else %}
                      <img
                        src="{{ block.settings.logo | image_url: width: 200 }}"
                        alt="{{ block.settings.logo.alt }}"
                        width="{{ block.settings.logo.width }}"
                        height="{{ block.settings.logo.height }}"
                        class="lab-logo-img"
                        loading="lazy">
                    {% endif %}
                  </div>
                  {% if block.settings.url != blank %}
                    <div class="lab-logo-arrow">
                      <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.0391 0L9.96094 1.07812L15.0469 6.16406H0V7.66406H15.0469L9.96094 12.75L11.0391 13.8281L17.4141 7.45312L17.9297 6.91406L17.4141 6.375L11.0391 0Z" fill="#1A1B1B"/>
                      </svg>
                    </div>
                  {% endif %}
                </div>
              {% else %}
                <div class="lab-logo-content">
                  <div class="lab-logo-left">
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                </div>
              {% endif %}

              <!-- Passed Text and List Items -->
              <div class="lab-items-wrapper">
                <!-- Row 1: Empty space | PASSED -->
                {% if block.settings.passed_text != blank %}
                  <div class="lab-passed-row">
                    <div class="lab-item-left"></div>
                    <div class="lab-item-right">
                      <span class="passed-text">{{ block.settings.passed_text }}</span>
                    </div>
                  </div>
                {% endif %}

                <!-- Rows 2+: Text | Icon -->
                {% if block.settings.list_items != blank %}
                  <div class="lab-list">
                    {% assign items = block.settings.list_items | newline_to_br | split: '<br />' %}
                    {% for item in items %}
                      {% if item != blank %}
                        <div class="lab-list-item">
                          <div class="lab-item-left">
                            <span>{{ item }}</span>
                          </div>
                          <div class="lab-item-right">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="check-icon">
                              <path d="M16.6667 5L7.50004 14.1667L3.33337 10" stroke="#1A1B1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                          </div>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>

    </div>

  </div>
</section>

{% schema %}
{
  "name": "No Promises Just Proof",
  "settings": [
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#F1F3F4"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image",
      "info": "Optional. Will overlay on background color if set."
    },
    {
      "type": "header",
      "content": "Container Settings"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 800,
      "max": 1400,
      "step": 50,
      "unit": "px",
      "label": "Max Width",
      "default": 1200
    },
    {
      "type": "header",
      "content": "Section Padding (Desktop)"
    },
    {
      "type": "range",
      "id": "paddingtop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 60
    },
    {
      "type": "range",
      "id": "paddingbottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 60
    },
    {
      "type": "range",
      "id": "paddingleft",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Left",
      "default": 15
    },
    {
      "type": "range",
      "id": "paddingright",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Right",
      "default": 15
    },
    {
      "type": "header",
      "content": "Section Padding (Mobile)"
    },
    {
      "type": "range",
      "id": "paddingtopmobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 40
    },
    {
      "type": "range",
      "id": "paddingbottommobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 40
    },
    {
      "type": "range",
      "id": "paddingleftmobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Left",
      "default": 15
    },
    {
      "type": "range",
      "id": "paddingrightmobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Right",
      "default": 15
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 50,
          "max": 600,
          "step": 10,
          "unit": "px",
          "label": "Image Width",
          "default": 200
        }
      ]
    },
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "No Promises Just Proof"
        },
        {
          "type": "select",
          "id": "alignment",
          "label": "Alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        }
      ]
    },
    {
      "type": "rich_text",
      "name": "Text",
      "limit": 1,
      "settings": [
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>3rd-party tested by ISO-Certified Labs</p>"
        },
        {
          "type": "select",
          "id": "alignment",
          "label": "Alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        }
      ]
    },
    {
      "type": "content_image",
      "name": "Content Image",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image_desktop",
          "label": "Image (Desktop)",
          "info": "1200px width recommended. Shown only on desktop â‰¥960px."
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Image (Mobile)",
          "info": "800px width recommended. Falls back to desktop image if empty."
        }
      ]
    },
    {
      "type": "lab_logo",
      "name": "Lab Logo Box",
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Lab Logo"
        },
        {
          "type": "url",
          "id": "url",
          "label": "URL",
          "info": "Optional link for the logo. Shows arrow if set."
        },
        {
          "type": "text",
          "id": "passed_text",
          "label": "Passed Text",
          "default": "PASSED",
          "info": "Text shown in top right with check icon"
        },
        {
          "type": "textarea",
          "id": "list_items",
          "label": "List Items",
          "default": "70 Different pesticides\n4 types of heavy metals\n16 different contaminants\n9 Microbial contaminants",
          "info": "One item per line"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "No Promises Just Proof",
      "blocks": [
        {
          "type": "title"
        },
        {
          "type": "rich_text"
        },
        {
          "type": "lab_logo",
          "settings": {
            "passed_text": "PASSED",
            "list_items": "70 Different pesticides\n4 types of heavy metals\n16 different contaminants\n9 Microbial contaminants"
          }
        },
        {
          "type": "lab_logo",
          "settings": {
            "passed_text": "PASSED",
            "list_items": "Purity, Potency, Identity\nMicrobiological, Allergens\nNon GMO"
          }
        }
      ]
    }
  ]
}
{% endschema %}
