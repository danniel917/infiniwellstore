{% comment %}
  FAQ Exclude List - Collection Pages
  To add/remove collections from FAQ exclusion, edit the excluded_collections array below
{% endcomment %}
{% assign excluded_collections = '' | split: ',' %}
{% assign hide_faq = false %}
{% for excluded_handle in excluded_collections %}
  {% if collection.handle == excluded_handle %}
    {% assign hide_faq = true %}
    {% break %}
  {% endif %}
{% endfor %}

{% unless hide_faq %}
  {% if section.settings.use_collection_metafield and collection.metafields.custom.faq != blank %}
    <h2 class="text-center">
     
      {% if collection.metafields.custom.faq_heading != blank %}
        {{ collection.metafields.custom.faq_heading }}
      {% else %}
           {{ collection.title | append: ' FAQs' }}
      {% endif %}
    </h2>
  {% endif %}
{% if collection.description != blank %}
  <div class="text-description">
    {{ collection.description }}
  </div>
{% endif %}
{{ 'section-faq-dropdown-collection-page.css' | asset_url | stylesheet_tag }}
<div class="learn-more-sec">
            <div class="additional-content">
{% if collection.metafields.custom.faq %}
  <section class="pdp-tab-small collection-faq-section">
    <div class="pdp-tab-small__wrapper">
      {% assign questions = collection.metafields.custom.faq | metafield_tag | split: 'Q: ' %}
      <ul class="accordian js__accordian">
        {% for question in questions offset: 1 %}
          <li class="outer-list">
            <h3 class="h5">{{ question | split: 'A:' | first | remove: '<p>' | remove: '</p>' }}</h3>
            <div class="content">
              {{ question | split: 'A: ' | last | remove_last: '<p>' }}
            </div>
          </li>
        {% endfor %}
      </ul>
    </div>
  </section>
  {% else %}
    {% if section.blocks.size > 0 %}
  <div class="collapsible-container">
    {% for block in section.blocks %}
      <div class="collapsible">
        <div class="dropdown-header">
          <h2>{{ block.settings.title }}</h2>
          <svg
            class="collapsed"
            xmlns="http://www.w3.org/2000/svg"
            width="15.117"
            height="15.117"
            viewBox="0 0 15.117 15.117"
          >
            <g id="Grupo_1124" data-name="Grupo 1124" transform="translate(1 1)">
              <path id="Trazado_449" data-name="Trazado 449" d="M7027.74,1021v13.117" transform="translate(-7020.74 -1021)" fill="none" stroke="#6b86ab" stroke-linecap="round" stroke-width="2"/>
              <path id="Trazado_450" data-name="Trazado 450" d="M0,0V13.117" transform="translate(0 6) rotate(-90)" fill="none" stroke="#6b86ab" stroke-linecap="round" stroke-width="2"/>
            </g>
          </svg>
          <svg
            class="expanded"
            xmlns="http://www.w3.org/2000/svg"
            width="15.117"
            height="2"
            viewBox="0 0 15.117 2"
          >
            <g id="Grupo_1097" data-name="Grupo 1097" transform="translate(1 -5)">
              <path id="Trazado_450" data-name="Trazado 450" d="M0,0V13.117" transform="translate(0 6) rotate(-90)" fill="none" stroke="#6b86ab" stroke-linecap="round" stroke-width="2"/>
            </g>
          </svg>
        </div>
        <div class="dropdown-content">
          {{ block.settings.copy }}
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}
   </div>              
{% endif %}
{% render 'dropdown-helper' %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
  const toggleButton = document.querySelector('.custom-toggle-button');
  const additionalContent = document.querySelector('.additional-content');

  if (toggleButton) {
    toggleButton.addEventListener('click', function() {
      if (additionalContent.style.display === 'none' || additionalContent.style.display === '') {
        additionalContent.style.display = 'block';
        toggleButton.textContent = 'Learn More -';
      } else {
        additionalContent.style.display = 'none';
        toggleButton.textContent = 'Learn More +';
      }
    });
  }
});
</script>
{% if section.settings.use_collection_metafield and collection.metafields.custom.faq != blank %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
   {% for question in questions offset: 1 %}
    {
      "@type": "Question",
      "name": "{{ question | split: "A: " | first | remove: "<p>" | remove: "</p>"  | strip_html }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ question | split: "A: " | last | remove_last: "<p>" | strip_html }}"
      }
    }  {% unless forloop.last %},{% endunless %}
   {% endfor %}
  ]
}
</script>
 {% endif %}
{% endunless %}
{% schema %}
{
  "name": "FAQ dropdown",
  "settings": [
    {
      "type": "checkbox",
      "id": "use_collection_metafield",
      "label": "Use collection FAQ metafield"
    }
  ],
  "blocks": [
    {
      "type": "question",
      "name": "Question",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Your title"
        },
        {
          "type": "richtext",
          "id": "copy",
          "label": "Label",
          "default": "<p>Welcome to my shop!</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ dropdown"
    }
  ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}